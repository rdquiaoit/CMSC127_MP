{% extends "dataseta.html" %}

{% block heading %}
	<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

{% endblock %}

{% block body %}
	
<div id="accordion2">
	<div class="card">
		<div class="card-header">
    		<a class="card-link" data-toggle="collapse" href="#collapseTwo">
      			<h4 class="ds-heading">Dataset B</h4>
    		</a>
  		</div>
  		<div id="collapseTwo" class="collapse show" data-parent="#accordion2">
    		<div class="card-body">
    			<div class="container-fluid ds-b">
    				<div class="row row-3rd">
						<div class="columns col-sm-12 col-md-8">
							<div class="inner col-age">
								<h5>Age Group of Patients</h5>
								<canvas id="age-chart" width="90" height="50"></canvas>
							</div>
						</div>
						<div class="columns col-sm-12 col-md-4">
							<div class="inner col-sex">
								<h5>Sex of Patients</h5>
								<canvas id="sex-chart" width="30" height="38"></canvas>
							</div>
						</div>
					</div>

					<div class="row row-4th">
						<div class="columns col-sm-12 col-md-6">
							<div class="inner">
								<h5>Patients Per City/Municipality</h5><hr>	
								<div id="scroll-1">
									<canvas id="muni-chart" width="2" height="50"></canvas>
								</div>
							</div>
						</div>
						<div class="columns col-sm-12 col-md-6">
							<div class="inner">
								<h5>Patients Per Region/Province</h5><hr>	
								<div id="scroll-2">
									<canvas id="region-chart" width="2" height="9"></canvas>
								</div>
							</div>
						</div>
					</div>
				</div>
    		</div>
		</div>
	</div> <!-- end of card -->
</div> <!-- end of acoordion2 -->


{% block javascript %}
<script>
	ageLabel = JSON.parse({{ ageLabel | tojson }})
	ageData = JSON.parse({{ ageData | tojson }})
	let ageChartInfo = document.getElementById('age-chart').getContext('2d');
	let ageChart = new Chart (ageChartInfo, {
		type: 'bar',
		data: {
			labels: ageLabel,
			datasets: [{
				label: 'Number of Patients',
				data: ageData,
				backgroundColor: 'rgba(253, 125, 0, 0.3)',
				borderColor: 'rgba(253, 125, 0, 1)',
				borderWidth: 2
			}]
		},
		options: {
			legend: { display: false },
			scales: {
			    xAxes: [{
			    	gridLines: {
			        	display: false
			      	}
			    }]
			}
		}
	});

	sexLabel = JSON.parse({{ sexLabel | tojson }})
	sexData = JSON.parse({{ sexData | tojson }})
	let sexChartInfo = document.getElementById('sex-chart').getContext('2d');
	let sexChart = new Chart (sexChartInfo, {
		type: 'pie',
		data: {
			labels: sexLabel,
			datasets: [{
				label: 'Sex of Patients',
				data: sexData,
				backgroundColor: ["#fb991c", "#0061bf", "#7b7c7e"]
			}] 
		},
		options: {
			legend: {
				position : 'bottom',
				labels : {
					usePointStyle : true,
				}
			}
		}
	});

	muniLabel = JSON.parse({{ muniCityResLabel | tojson }})
	muniData = JSON.parse({{ muniCityResData | tojson }})
	let muniChartInfo = document.getElementById('muni-chart').getContext('2d');
	let muniChart = new Chart (muniChartInfo, {
		type: 'horizontalBar',
		data: {
			labels: muniLabel,
			datasets: [{
				label: 'Number of Patients',
				data: muniData,
				backgroundColor: "#2f90a7"
			}]
		},
		options: {
			legend: { display: false },
			xAxes: [{
			    stacked: true
			}]
		}
	});

	regLabel = JSON.parse({{ regProvResLabel | tojson }})
	regData = JSON.parse({{ regProvResData | tojson }})
	let regChartInfo = document.getElementById('region-chart').getContext('2d');
	let regChart = new Chart (regChartInfo, {
		type: 'horizontalBar',
		data: {
			labels: regLabel,
			datasets: [{
				label: 'Number of Patients',
				data: regData,
				backgroundColor: "#e4704a"
			}]
		},
		options: {
			legend: { display: false },
			xAxes: [{
			    stacked: true
			}]
		}
	});


</script>
{% endblock %}

{% endblock %}
